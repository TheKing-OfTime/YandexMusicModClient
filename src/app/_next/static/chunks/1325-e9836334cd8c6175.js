"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1325],{21325:function(t,e,a){a.d(e,{T4:function(){return P.NonMusicAlbumsPage},z4:function(){return i.z},ov:function(){return _.NonMusicCategoryPage},C2:function(){return h.NonMusicCategoryPlaylistsPage},NG:function(){return v}});var i=a(13234),l=a(97898),n=a(23874),u=a(82621),o=a(39583),s=a(20794),r=a(15526);let d=l.V5.model("NonMusicCategoryPlaylistsDataItem",{uid:l.V5.number,kind:l.V5.number,data:l.V5.maybeNull(u.d2)}),g=l.V5.model("NonMusicCategoryPlaylistsPage",{errorStatusCode:l.V5.maybe(l.V5.number),loadingState:l.V5.enumeration(Object.values(s.Gui)),title:l.V5.maybeNull(l.V5.string),pager:l.V5.maybeNull(r.Vn),playlists:l.V5.maybeNull(l.V5.array(d)),alreadyRequestedPages:l.V5.map(l.V5.number),requests:l.V5.maybeNull(l.V5.number)}).views(t=>({get isLoading(){return t.loadingState===s.Gui.IDLE||t.loadingState===s.Gui.PENDING},get isNotFound(){let e=t.errorStatusCode===n.CN.NOT_FOUND||t.errorStatusCode===n.CN.BAD_REQUEST;return t.loadingState===s.Gui.REJECT&&e},get isSomethingWrong(){return t.loadingState===s.Gui.REJECT&&!this.isNotFound}})).actions(t=>{let e={getPlaylists:(0,l.ls)(function*(e){var a,i,u;let{page:r=0,pageSize:d=20}=e,{playlistsResource:g,modelActionsLogger:c}=(0,l.dU)(t);if(!(!(null===(a=t.playlists)||void 0===a?void 0:a.length)||t.alreadyRequestedPages.has("".concat(r)))){t.alreadyRequestedPages.set("".concat(r),r);try{let e=r*d,a=t.playlists.slice(e,e+d),n=yield g.getPlaylists({playlistIds:a.map(t=>"".concat(t.uid,":").concat(t.kind)),resumeStream:!1});t.requests=(null!==(u=t.requests)&&void 0!==u?u:0)+1;let s={page:r,perPage:d,total:null===(i=t.playlists)||void 0===i?void 0:i.length},c=n.playlists.map(o.PV),N=r*d,E=0;for(let e=N;e<N+d;e++)c[E]&&t.playlists[e]&&(t.playlists[e].data=(0,l.pj)(c[E])),E++;t.pager=s}catch(e){c.error(e),e instanceof n.du&&(e.statusCode===n.CN.NOT_FOUND||e.statusCode===n.CN.BAD_REQUEST)&&(t.errorStatusCode=n.CN.NOT_FOUND),t.loadingState!==s.Gui.IDLE&&(t.loadingState=s.Gui.REJECT)}}}),getData:(0,l.ls)(function*(a){let{categoryId:i,page:u=0,pageSize:o=20}=a,{nonMusicResource:r,modelActionsLogger:d}=(0,l.dU)(t);if(t.loadingState!==s.Gui.PENDING)try{t.loadingState=s.Gui.PENDING;let a=yield r.getPlaylists({categoryId:i});t.title=a.title,a.entities&&a.entities.length>0&&(t.playlists=(0,l.pj)(a.entities.map(t=>({uid:t.uid,kind:t.kind})))),t.loadingState!==s.Gui.IDLE&&(t.loadingState=s.Gui.RESOLVE),yield e.getPlaylists({page:u,pageSize:o})}catch(e){d.error(e),e instanceof n.du&&(e.statusCode===n.CN.NOT_FOUND||e.statusCode===n.CN.BAD_REQUEST)&&(t.errorStatusCode=n.CN.NOT_FOUND),t.loadingState!==s.Gui.IDLE&&(t.loadingState=s.Gui.REJECT)}}),reset(){t.loadingState=s.Gui.IDLE,t.alreadyRequestedPages.clear(),t.title=null,t.playlists=(0,l.pj)([]),t.requests=null,t.pager=null}};return e});var c=a(44443),N=a(13555);let E=l.V5.model("NonMusicAlbumsPageItem",{id:l.V5.number,data:l.V5.maybeNull(N.ug)}),C=l.V5.model("NonMusicAlbumsPage",{errorStatusCode:l.V5.maybe(l.V5.number),loadingState:l.V5.enumeration(Object.values(s.Gui)),title:l.V5.maybeNull(l.V5.string),albums:l.V5.maybeNull(l.V5.array(E)),requestsCount:l.V5.maybe(l.V5.number)}).views(t=>({get isLoading(){return t.loadingState===s.Gui.IDLE||t.loadingState===s.Gui.PENDING},get isNotFound(){let e=t.errorStatusCode===n.CN.NOT_FOUND||t.errorStatusCode===n.CN.BAD_REQUEST;return t.loadingState===s.Gui.REJECT&&e},get isSomethingWrong(){return t.loadingState===s.Gui.REJECT&&!this.isNotFound}})).actions(t=>({getEditorialAlbums:(0,l.ls)(function*(e){let{id:a}=e,{nonMusicResource:i,modelActionsLogger:u}=(0,l.dU)(t);if(t.loadingState!==s.Gui.PENDING)try{var o;t.loadingState=s.Gui.PENDING;let e=yield i.getEditorialAlbums({id:a});t.title=e.title,(null===(o=e.entities)||void 0===o?void 0:o.length)&&(t.albums=(0,l.pj)(e.entities.map(t=>({id:t})))),t.loadingState!==s.Gui.IDLE&&(t.loadingState=s.Gui.RESOLVE)}catch(e){u.error(e),e instanceof n.du&&(e.statusCode===n.CN.NOT_FOUND||e.statusCode===n.CN.BAD_REQUEST)&&(t.errorStatusCode=n.CN.NOT_FOUND),t.loadingState!==s.Gui.IDLE&&(t.loadingState=s.Gui.REJECT)}}),getCategoryAlbums:(0,l.ls)(function*(e){let{id:a}=e,{nonMusicResource:i,modelActionsLogger:u}=(0,l.dU)(t);if(t.loadingState!==s.Gui.PENDING)try{var o;t.loadingState=s.Gui.PENDING;let e=yield i.getCategoryAlbums({id:a});t.title=e.title,(null===(o=e.albums)||void 0===o?void 0:o.length)&&(t.albums=(0,l.pj)(e.albums.map(t=>({id:t})))),t.loadingState!==s.Gui.IDLE&&(t.loadingState=s.Gui.RESOLVE)}catch(e){u.error(e),e instanceof n.du&&(e.statusCode===n.CN.NOT_FOUND||e.statusCode===n.CN.BAD_REQUEST)&&(t.errorStatusCode=n.CN.NOT_FOUND),t.loadingState!==s.Gui.IDLE&&(t.loadingState=s.Gui.REJECT)}}),getAlbumsByRange:(0,l.ls)(function*(e,a){var i,n,u;let{albumResource:o,modelActionsLogger:s}=(0,l.dU)(t);if(!(null===(i=t.albums)||void 0===i?void 0:i.length))return null;e=Math.max(0,e),a=Math.min(a,t.albums.length);let r=[];for(let i=e;i<=a;i++)(null===(n=t.albums[i])||void 0===n?void 0:n.id)&&!(null===(u=t.albums[i])||void 0===u?void 0:u.data)&&r.push(t.albums[i].id);if(!r.length)return null;try{let e=yield o.getAlbums({albumIds:r});null==e||e.forEach(e=>{var a;null===(a=t.albums)||void 0===a||a.forEach((a,i)=>{var l;a.id===e.id&&(null===(l=t.albums)||void 0===l?void 0:l[i])&&(t.albums[i].data=(0,N.ym)(e))})}),t.requestsCount?t.requestsCount=t.requestsCount+1:t.requestsCount=1}catch(t){s.error(t)}return null}),reset(){t.loadingState=s.Gui.IDLE,t.title=null,t.albums=null,t.requestsCount=0}}));var S=a(96159),m=a(79153),y=a(6609);let p=t=>{let e=t.entities.map(t=>({...(0,N.ym)(t.data.album),chart:t.data.chartPosition&&(0,y.W5)(t.data.chartPosition),likesCount:t.data.album.likesCount}));return(0,l.pj)({id:t.id,type:S.c.ALBUM_CHART,landingBlockType:m.g.CHART_ALBUMS,title:t.title,description:t.description,viewAllActionLink:t.viewAllUrl,items:e})},V=t=>{let e=t.entities.map(t=>({...(0,N.ym)(t.data),likesCount:t.data.likesCount}));return(0,l.pj)({id:t.id,type:S.c.CATEGORY,landingBlockType:m.g.NON_MUSIC_EDITORIAL_COMPILATION,title:t.title,description:t.description,viewAllActionLink:t.viewAllUrl,items:e})};var b=a(4110);let T=t=>{let e=t.entities.map(t=>{switch(t.type){case S.f.PLAYLIST:return{type:b.Q.PLAYLIST,data:(0,u.VB)({...t.data,artists:[]})};case S.f.ALBUM:return{type:b.Q.ALBUM,data:(0,N.ym)(t.data)}}});return(0,l.pj)({id:t.id,type:S.c.EDITORIAL_PLAYLISTS,landingBlockType:m.g.RECENTLY_PLAYED,title:t.title,description:t.description,viewAllActionLink:t.viewAllUrl,items:e})},G=l.V5.model("NonMusicBaseBlock").props({type:l.V5.enumeration(Object.values(S.c.CATEGORY)),landingBlockType:l.V5.enumeration(Object.values(m.g)),id:l.V5.maybe(l.V5.string),title:l.V5.maybe(l.V5.string),description:l.V5.maybe(l.V5.string),viewAllActionLink:l.V5.maybe(l.V5.string)}),A=G.named("NonMusicCategoryBlock").props({type:l.V5.literal(S.c.CATEGORY),landingBlockType:l.V5.literal(m.g.NON_MUSIC_EDITORIAL_COMPILATION),items:l.V5.array(N.ug)}),D=G.named("NonMusicChartAlbumBlock").props({type:l.V5.literal(S.c.ALBUM_CHART),landingBlockType:l.V5.literal(m.g.CHART_ALBUMS),items:l.V5.array(N.ug)}),L=l.V5.union(c.SJ,c.jn),O=G.named("NonMusicEditorialPlaylistsBlock").props({type:l.V5.literal(S.c.EDITORIAL_PLAYLISTS),landingBlockType:l.V5.literal(m.g.RECENTLY_PLAYED),items:l.V5.array(L)}),I=l.V5.union(D,O,A),R=l.V5.model("NonMusicCategoryPage",{errorStatusCode:l.V5.maybeNull(l.V5.number),title:l.V5.maybeNull(l.V5.string),loadingState:l.V5.enumeration(Object.values(s.Gui)),blocks:l.V5.array(I)}).views(t=>({get isLoading(){return t.loadingState===s.Gui.IDLE||t.loadingState===s.Gui.PENDING},get isLoaded(){return t.loadingState===s.Gui.RESOLVE},get isRejected(){return t.loadingState===s.Gui.REJECT},get isNotFound(){let e=t.loadingState===s.Gui.RESOLVE&&0===t.blocks.length,a=t.errorStatusCode===n.CN.NOT_FOUND||t.errorStatusCode===n.CN.BAD_REQUEST;return t.loadingState===s.Gui.REJECT&&a||e},get isSomethingWrong(){return t.loadingState===s.Gui.REJECT&&!this.isNotFound}})).actions(t=>({getData:(0,l.ls)(function*(e){let{categoryId:a}=e,{nonMusicResource:i,modelActionsLogger:u}=(0,l.dU)(t);if(t.loadingState!==s.Gui.PENDING)try{t.loadingState=s.Gui.PENDING;let e=yield i.getCategory({categoryId:a});t.title=e.title;let n=[];e.blocks&&(e.blocks.forEach(t=>{switch(t.type){case S.c.ALBUM_CHART:n.push(p(t));return;case S.c.EDITORIAL_PLAYLISTS:n.push(T(t));return;case S.c.CATEGORY:n.push(V(t));return}}),t.blocks=(0,l.pj)(n)),t.loadingState!==s.Gui.IDLE&&(t.loadingState=s.Gui.RESOLVE)}catch(e){u.error(e),e instanceof n.du&&(e.statusCode===n.CN.NOT_FOUND||e.statusCode===n.CN.BAD_REQUEST)&&(t.errorStatusCode=n.CN.NOT_FOUND),t.loadingState!==s.Gui.IDLE&&(t.loadingState=s.Gui.REJECT)}}),reset(){t.errorStatusCode=null,t.title=null,t.loadingState=s.Gui.IDLE,t.blocks=(0,l.pj)([])}})),v=l.V5.model("NonMusicPage",{landing:c.d5,albums:C,categorySubpage:R,categoryPlaylistsSubpage:g});var P=a(300);a(31600);var _=a(81285),h=a(11711);a(93054),a(24854)}}]);