(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5439],{23399:function(e,t,n){Promise.resolve().then(n.bind(n,13477)),Promise.resolve().then(n.bind(n,82036)),Promise.resolve().then(n.bind(n,93422)),Promise.resolve().then(n.bind(n,89287)),Promise.resolve().then(n.bind(n,43998)),Promise.resolve().then(n.bind(n,82607)),Promise.resolve().then(n.bind(n,77670)),Promise.resolve().then(n.bind(n,81437)),Promise.resolve().then(n.bind(n,56307)),Promise.resolve().then(n.bind(n,17983)),Promise.resolve().then(n.bind(n,13508)),Promise.resolve().then(n.bind(n,23096)),Promise.resolve().then(n.bind(n,54323)),Promise.resolve().then(n.bind(n,65826)),Promise.resolve().then(n.bind(n,57134)),Promise.resolve().then(n.bind(n,42934)),Promise.resolve().then(n.bind(n,86445)),Promise.resolve().then(n.bind(n,23394)),Promise.resolve().then(n.bind(n,13736)),Promise.resolve().then(n.bind(n,74539)),Promise.resolve().then(n.bind(n,39173)),Promise.resolve().then(n.t.bind(n,83181,23)),Promise.resolve().then(n.bind(n,34486)),Promise.resolve().then(n.bind(n,26579)),Promise.resolve().then(n.bind(n,96572)),Promise.resolve().then(n.bind(n,9446)),Promise.resolve().then(n.bind(n,93992)),Promise.resolve().then(n.bind(n,95151)),Promise.resolve().then(n.bind(n,78603)),Promise.resolve().then(n.bind(n,866)),Promise.resolve().then(n.bind(n,24678)),Promise.resolve().then(n.bind(n,53922)),Promise.resolve().then(n.bind(n,5342)),Promise.resolve().then(n.bind(n,99985)),Promise.resolve().then(n.bind(n,16457)),Promise.resolve().then(n.bind(n,2870)),Promise.resolve().then(n.bind(n,4898)),Promise.resolve().then(n.bind(n,26390)),Promise.resolve().then(n.bind(n,76961)),Promise.resolve().then(n.bind(n,93139)),Promise.resolve().then(n.bind(n,90283)),Promise.resolve().then(n.bind(n,30787)),Promise.resolve().then(n.bind(n,83811)),Promise.resolve().then(n.bind(n,87712)),Promise.resolve().then(n.bind(n,15400)),Promise.resolve().then(n.bind(n,24890)),Promise.resolve().then(n.bind(n,98494)),Promise.resolve().then(n.bind(n,98583)),Promise.resolve().then(n.bind(n,3031)),Promise.resolve().then(n.bind(n,59934)),Promise.resolve().then(n.bind(n,75318)),Promise.resolve().then(n.bind(n,68768)),Promise.resolve().then(n.bind(n,87582)),Promise.resolve().then(n.bind(n,51986)),Promise.resolve().then(n.bind(n,95172)),Promise.resolve().then(n.bind(n,77112)),Promise.resolve().then(n.bind(n,22852)),Promise.resolve().then(n.bind(n,53644)),Promise.resolve().then(n.bind(n,367)),Promise.resolve().then(n.t.bind(n,72507,23)),Promise.resolve().then(n.bind(n,35196)),Promise.resolve().then(n.bind(n,17743)),Promise.resolve().then(n.bind(n,89429)),Promise.resolve().then(n.bind(n,22327)),Promise.resolve().then(n.bind(n,18801)),Promise.resolve().then(n.bind(n,75576)),Promise.resolve().then(n.bind(n,38965)),Promise.resolve().then(n.bind(n,47320)),Promise.resolve().then(n.bind(n,86784)),Promise.resolve().then(n.bind(n,37634)),Promise.resolve().then(n.bind(n,57438)),Promise.resolve().then(n.bind(n,84486)),Promise.resolve().then(n.bind(n,98757)),Promise.resolve().then(n.bind(n,40161)),Promise.resolve().then(n.bind(n,67419)),Promise.resolve().then(n.bind(n,35637)),Promise.resolve().then(n.bind(n,55044)),Promise.resolve().then(n.bind(n,97062)),Promise.resolve().then(n.bind(n,9730)),Promise.resolve().then(n.bind(n,25402)),Promise.resolve().then(n.bind(n,16228)),Promise.resolve().then(n.bind(n,46849)),Promise.resolve().then(n.bind(n,18993)),Promise.resolve().then(n.bind(n,21532)),Promise.resolve().then(n.bind(n,37850)),Promise.resolve().then(n.bind(n,62888)),Promise.resolve().then(n.bind(n,24263)),Promise.resolve().then(n.bind(n,95929)),Promise.resolve().then(n.bind(n,41783)),Promise.resolve().then(n.bind(n,88648)),Promise.resolve().then(n.bind(n,20275)),Promise.resolve().then(n.bind(n,48646)),Promise.resolve().then(n.bind(n,95298)),Promise.resolve().then(n.bind(n,61481)),Promise.resolve().then(n.bind(n,78955)),Promise.resolve().then(n.bind(n,87354)),Promise.resolve().then(n.bind(n,88553)),Promise.resolve().then(n.bind(n,24827)),Promise.resolve().then(n.bind(n,80694)),Promise.resolve().then(n.bind(n,51518)),Promise.resolve().then(n.bind(n,23810)),Promise.resolve().then(n.bind(n,87823)),Promise.resolve().then(n.bind(n,18986)),Promise.resolve().then(n.bind(n,89833)),Promise.resolve().then(n.bind(n,13833)),Promise.resolve().then(n.bind(n,13731)),Promise.resolve().then(n.bind(n,82213)),Promise.resolve().then(n.bind(n,3072)),Promise.resolve().then(n.bind(n,87487)),Promise.resolve().then(n.bind(n,11370)),Promise.resolve().then(n.bind(n,47509)),Promise.resolve().then(n.bind(n,8080)),Promise.resolve().then(n.bind(n,76924)),Promise.resolve().then(n.bind(n,53864)),Promise.resolve().then(n.bind(n,66771)),Promise.resolve().then(n.bind(n,45573)),Promise.resolve().then(n.bind(n,80007)),Promise.resolve().then(n.bind(n,83482)),Promise.resolve().then(n.bind(n,50446)),Promise.resolve().then(n.bind(n,89554)),Promise.resolve().then(n.bind(n,76610)),Promise.resolve().then(n.bind(n,60933)),Promise.resolve().then(n.bind(n,70359)),Promise.resolve().then(n.bind(n,93051)),Promise.resolve().then(n.bind(n,70650)),Promise.resolve().then(n.bind(n,57704)),Promise.resolve().then(n.bind(n,43504)),Promise.resolve().then(n.bind(n,89795)),Promise.resolve().then(n.bind(n,48611)),Promise.resolve().then(n.bind(n,47822)),Promise.resolve().then(n.bind(n,96400)),Promise.resolve().then(n.bind(n,98922)),Promise.resolve().then(n.bind(n,76950)),Promise.resolve().then(n.bind(n,32650)),Promise.resolve().then(n.bind(n,20429)),Promise.resolve().then(n.bind(n,35748)),Promise.resolve().then(n.bind(n,84977)),Promise.resolve().then(n.bind(n,65424)),Promise.resolve().then(n.bind(n,24049)),Promise.resolve().then(n.bind(n,8767)),Promise.resolve().then(n.bind(n,25616)),Promise.resolve().then(n.bind(n,29833)),Promise.resolve().then(n.bind(n,45338)),Promise.resolve().then(n.bind(n,20636)),Promise.resolve().then(n.bind(n,21720)),Promise.resolve().then(n.bind(n,47771)),Promise.resolve().then(n.bind(n,46536)),Promise.resolve().then(n.bind(n,39927)),Promise.resolve().then(n.bind(n,47112)),Promise.resolve().then(n.bind(n,44338)),Promise.resolve().then(n.bind(n,2668)),Promise.resolve().then(n.bind(n,54665)),Promise.resolve().then(n.bind(n,39438)),Promise.resolve().then(n.bind(n,39099)),Promise.resolve().then(n.bind(n,94263)),Promise.resolve().then(n.bind(n,6834)),Promise.resolve().then(n.bind(n,13044)),Promise.resolve().then(n.bind(n,40510)),Promise.resolve().then(n.bind(n,61796)),Promise.resolve().then(n.bind(n,57129)),Promise.resolve().then(n.bind(n,25821)),Promise.resolve().then(n.bind(n,13487)),Promise.resolve().then(n.bind(n,82539)),Promise.resolve().then(n.bind(n,43790)),Promise.resolve().then(n.bind(n,68654)),Promise.resolve().then(n.bind(n,31603)),Promise.resolve().then(n.bind(n,6317)),Promise.resolve().then(n.bind(n,32270)),Promise.resolve().then(n.bind(n,67857)),Promise.resolve().then(n.bind(n,84422)),Promise.resolve().then(n.bind(n,97376)),Promise.resolve().then(n.bind(n,10321)),Promise.resolve().then(n.bind(n,16783)),Promise.resolve().then(n.bind(n,56541)),Promise.resolve().then(n.bind(n,85602)),Promise.resolve().then(n.bind(n,2084)),Promise.resolve().then(n.bind(n,89332)),Promise.resolve().then(n.bind(n,56590)),Promise.resolve().then(n.bind(n,48481)),Promise.resolve().then(n.bind(n,31022)),Promise.resolve().then(n.bind(n,26500)),Promise.resolve().then(n.bind(n,90334)),Promise.resolve().then(n.bind(n,86364)),Promise.resolve().then(n.bind(n,34882)),Promise.resolve().then(n.bind(n,77588)),Promise.resolve().then(n.bind(n,60731)),Promise.resolve().then(n.bind(n,5299)),Promise.resolve().then(n.bind(n,94934)),Promise.resolve().then(n.bind(n,89585)),Promise.resolve().then(n.bind(n,19219)),Promise.resolve().then(n.bind(n,38330)),Promise.resolve().then(n.bind(n,88860)),Promise.resolve().then(n.bind(n,40174)),Promise.resolve().then(n.bind(n,9323)),Promise.resolve().then(n.bind(n,45893)),Promise.resolve().then(n.bind(n,17351)),Promise.resolve().then(n.bind(n,88363)),Promise.resolve().then(n.bind(n,48781)),Promise.resolve().then(n.bind(n,82191)),Promise.resolve().then(n.bind(n,77113)),Promise.resolve().then(n.bind(n,21740)),Promise.resolve().then(n.bind(n,56381)),Promise.resolve().then(n.bind(n,90721)),Promise.resolve().then(n.bind(n,46772)),Promise.resolve().then(n.bind(n,16358)),Promise.resolve().then(n.bind(n,72918)),Promise.resolve().then(n.bind(n,1842)),Promise.resolve().then(n.bind(n,79388)),Promise.resolve().then(n.bind(n,99479)),Promise.resolve().then(n.bind(n,14697)),Promise.resolve().then(n.bind(n,49282)),Promise.resolve().then(n.bind(n,79919)),Promise.resolve().then(n.bind(n,18270)),Promise.resolve().then(n.bind(n,5019)),Promise.resolve().then(n.bind(n,4101)),Promise.resolve().then(n.bind(n,67263)),Promise.resolve().then(n.bind(n,2282)),Promise.resolve().then(n.bind(n,70872)),Promise.resolve().then(n.bind(n,4357)),Promise.resolve().then(n.bind(n,36988)),Promise.resolve().then(n.bind(n,38577)),Promise.resolve().then(n.bind(n,79828)),Promise.resolve().then(n.bind(n,50449)),Promise.resolve().then(n.bind(n,95114)),Promise.resolve().then(n.bind(n,92048)),Promise.resolve().then(n.bind(n,72563)),Promise.resolve().then(n.bind(n,14846)),Promise.resolve().then(n.bind(n,1138)),Promise.resolve().then(n.bind(n,99827)),Promise.resolve().then(n.bind(n,1254)),Promise.resolve().then(n.bind(n,55663)),Promise.resolve().then(n.bind(n,99224))},26928:function(e,t,n){"use strict";n.d(t,{Ji:function(){return h}});var i,o,r,s,a=n(72669),l=n(91207),d=n(37184);(i=r||(r={})).formatDate="FormattedDate",i.formatTime="FormattedTime",i.formatNumber="FormattedNumber",i.formatList="FormattedList",i.formatDisplayName="FormattedDisplayName",(o=s||(s={})).formatDate="FormattedDateParts",o.formatTime="FormattedTimeParts",o.formatNumber="FormattedNumberParts",o.formatList="FormattedListParts";var m=function(e){var t=(0,d.Z)(),n=e.value,i=e.children,o=(0,a.__rest)(e,["value","children"]);return i(t.formatNumberToParts(n,o))};function u(e){var t=function(t){var n=(0,d.Z)(),i=t.value,o=t.children,r=(0,a.__rest)(t,["value","children"]),s="string"==typeof i?new Date(i||0):i;return o("formatDate"===e?n.formatDateToParts(s,r):n.formatTimeToParts(s,r))};return t.displayName=s[e],t}function c(e){var t=function(t){var n=(0,d.Z)(),i=t.value,o=t.children,r=(0,a.__rest)(t,["value","children"]),s=n[e](i,r);if("function"==typeof o)return o(s);var m=n.textComponent||l.Fragment;return l.createElement(m,null,s)};return t.displayName=r[e],t}m.displayName="FormattedNumberParts",m.displayName="FormattedNumberParts";var h=c("formatDate");c("formatTime"),c("formatNumber"),c("formatList"),c("formatDisplayName"),u("formatDate"),u("formatTime")},67228:function(e,t,n){"use strict";n.d(t,{C:function(){return O},F:function(){return m}});var i,o,r=n(91207),s=n(58997);let a=e=>({serviceSessionId:e.serviceSessionId}),l=e=>{let{target:t,serviceSessionId:n,offersBatchId:i,offersPositionIds:o}=e;return{serviceSessionId:n,target:t,offersBatchId:i,offersPositionIds:o}},d=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{frontSessionStart:n,loadOffersResulted:i}=(0,s.E_I)(t);(0,r.useEffect)(()=>{e.loadingState!==s.Gui.RESOLVE||e.isFrontSessionStartSent||(n(a(e)),e.toggleIsFrontSessionStartSentTrue())},[e,e.loadingState,e.isFrontSessionStartSent,n]),(0,r.useEffect)(()=>{e.loadingState!==s.Gui.RESOLVE||e.isLoadOffersResultSent||(i(l(e)),e.toggleIsLoadOffersResultSentTrue())},[e,e.loadingState,e.isLoadOffersResultSent,i])},m=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{user:n,offers:i}=(0,s.oR4)(),o=i[e],{payment:{environment:a}}=(0,s.uK4)().get(s.U5t);return(0,r.useEffect)(()=>{if(t&&o.isNeededToLoad){let e="production"===a?n.account.uid:void 0;o.getData({uid:e})}},[t,o,o.isNeededToLoad,a,n]),d(o,t),o};var u=n(2685);let c=e=>(0,u.pj)(e),h=e=>{let{plans:t,...n}=e;return(0,u.pj)({...n,plans:t.map(c)})},v=e=>{let{option:t,...n}=e;return(0,u.pj)({...h(n),option:t})},b=e=>{if(!e)return null;let{tariff:t,...n}=e;return(0,u.pj)({...h(n),tariff:t})},P=e=>{let{positionId:t,silentInvoiceAvailable:n,structureType:i,tariffOffer:o,optionOffers:r}=e;return(0,u.pj)({positionId:t,silentInvoiceAvailable:n,structureType:i,tariffOffer:b(o),optionsOffers:r.map(v)})},f=e=>{let{eventSessionId:t,batchPositionId:n,offers:i}=e;return(0,u.pj)({eventSessionId:t,batchPositionId:n,offers:i.map(P)})};(i=o||(o={})).COMPOSITE="COMPOSITE",i.OPTION="OPTION",i.TARIFF="TARIFF";var p=n(36063);let _=u.V5.model({amount:u.V5.number,currency:u.V5.string}),g=u.V5.model({typename:u.V5.literal(p.f.IntroPlan),period:u.V5.string,price:_,repeatCount:u.V5.number}),x=u.V5.model({typename:u.V5.literal(p.f.IntroUntilPlan),price:_,until:u.V5.string}),S=u.V5.model({typename:u.V5.literal(p.f.TrialPlan),period:u.V5.string}),y=u.V5.model({typename:u.V5.literal(p.f.TrialUntilPlan),until:u.V5.string}),C=u.V5.union(g,x,S,y),N=u.V5.model({name:u.V5.string}),T=u.V5.model({additionText:u.V5.string,description:u.V5.string,name:u.V5.string,text:u.V5.string,title:u.V5.string,plans:u.V5.array(C),commonPeriod:u.V5.string,commonPrice:_}),k=T.props({option:N}),M=T.props({tariff:N}),j=u.V5.model({positionId:u.V5.string,silentInvoiceAvailable:u.V5.boolean,structureType:u.V5.enumeration(Object.values(o)),tariffOffer:u.V5.maybeNull(M),optionsOffers:u.V5.array(k)}),w=u.V5.model({eventSessionId:u.V5.string,batchPositionId:u.V5.string,offers:u.V5.array(j)}),D=u.V5.model({loadingState:u.V5.enumeration(Object.values(s.Gui)),isFrontSessionStartSent:u.V5.maybe(u.V5.boolean),isLoadOffersResultSent:u.V5.maybe(u.V5.boolean),data:u.V5.maybeNull(w)}).views(e=>({get isNeededToLoad(){return e.loadingState===s.Gui.IDLE},get isLoading(){return e.loadingState===s.Gui.PENDING},get isLoaded(){return e.loadingState===s.Gui.RESOLVE},get isRejected(){return e.loadingState===s.Gui.REJECT},get isShimmerVisible(){return this.isNeededToLoad||this.isLoading||this.isRejected},get isShimmerActive(){return this.isLoading},get target(){return"music"},get features(){return},get offerPosition(){return 0},get offer(){var t;return null===(t=e.data)||void 0===t?void 0:t.offers[this.offerPosition]},get offersPositionId(){var n;return(null===(n=this.offer)||void 0===n?void 0:n.positionId)||""},get tariffOffer(){var i;return null===(i=this.offer)||void 0===i?void 0:i.tariffOffer},get mainText(){var o;return null===(o=this.tariffOffer)||void 0===o?void 0:o.text},get additionText(){var r;return null===(r=this.tariffOffer)||void 0===r?void 0:r.additionText},get serviceSessionId(){var a;return(null===(a=e.data)||void 0===a?void 0:a.eventSessionId)||""},get offersBatchId(){var l;return(null===(l=e.data)||void 0===l?void 0:l.batchPositionId)||""},get offersPositionIds(){var d;return(null===(d=e.data)||void 0===d?void 0:d.offers.map(e=>e.positionId))||[]}})).actions(e=>({toggleIsFrontSessionStartSentTrue(){e.isFrontSessionStartSent=!0},toggleIsLoadOffersResultSentTrue(){e.isLoadOffersResultSent=!0},getData:(0,u.ls)(function*(t){let{uid:n}=t,{offersResource:i,modelActionsLogger:o}=(0,u.dU)(e);if(e.loadingState!==s.Gui.PENDING){e.isFrontSessionStartSent=!1,e.isLoadOffersResultSent=!1;try{e.loadingState=s.Gui.PENDING;let t=yield i.getCompositeOffers({uid:n,target:e.target,features:e.features}),o=f(t);e.data=o,e.loadingState=s.Gui.RESOLVE}catch(t){e.loadingState=s.Gui.REJECT,o.error(t)}}})})).named("MusicOffers"),O=u.V5.model("Offers",{music:D})},31316:function(e,t,n){"use strict";n.d(t,{Qw:function(){return g},_$:function(){return m},c8:function(){return o},tP:function(){return a}});var i,o,r=n(91207),s=n(58997);let a=e=>{let{target:t,tariffOfferName:n,serviceSessionId:i="",isEnabled:o=!0}=e,{paymentWidgetModal:{modal:a,setTarget:l,setTariffOfferName:d,setServiceSessionId:m}}=(0,s.oR4)();return{open:(0,r.useCallback)(()=>{o&&(l(t),m(i),n&&d(n),a.open())},[d,l,m,t,n,i,a,o]),isOpened:a.isOpened}};var l=n(2685),d=n(91694);(i=o||(o={})).IDLE="idle",i.SUCCESS="success",i.ERROR="error";let m=l.V5.model({modal:d.KL,target:l.V5.string,tariffOfferName:l.V5.string,serviceSessionId:l.V5.string,status:l.V5.enumeration(Object.values(o))}).views(e=>({get isSuccess(){return e.status===o.SUCCESS},get isError(){return e.status===o.ERROR}})).actions(e=>({setTarget(t){e.target=t},setTariffOfferName(t){e.tariffOfferName=t},setServiceSessionId(t){e.serviceSessionId=t},setStatus(t){e.status=t},reset(){e.target="",e.tariffOfferName="",e.serviceSessionId="",e.status=o.IDLE}}));var u=n(65301),c=n(9695),h=n(96233),v=n(2319),b=n(14386);let P=null,f=e=>{let{className:t,target:n,serviceSessionId:i,tariffOfferName:o,onLoad:a,onSuccess:l,onError:d,onClose:m}=e,c=(0,r.useRef)(null),{theme:h}=(0,s.FgM)(),{pwTools:v}=(0,s.N7D)(),b=(0,r.useCallback)(e=>{"purchase_data"===e.type&&(null==l||l())},[l]),f=(0,r.useCallback)(()=>{null==d||d()},[d]),p=(0,r.useCallback)(()=>{null==m||m()},[m]),_=(0,r.useCallback)(e=>{"loaded"===e.data.status&&(null==a||a())},[a]),g=(0,r.useCallback)(async()=>{if(!v||!c.current)return;let{lang:e,mode:t,platform:r,widgetServiceName:s,authMethod:a}=v.options;if(!P)try{P=await v.loadManager()}catch(e){p();return}P.send({type:"init",options:{lang:e,mode:t,platform:r,widgetServiceName:s,authMethod:a,usePlusHost:!0,theme:h,onSuccess:b,onError:f,onReport:_,onClose:p}}),P.send({type:"open",options:{target:n,eventSessionId:i,tariffOfferName:o,targetNode:c.current,isTarifficator:!0}})},[h,v,n,o,i,b,f,_,p]);return(0,r.useEffect)(()=>(g(),()=>{null==P||P.send({type:"close"})}),[g]),(0,u.jsx)("div",{className:t,ref:c})};var p=n(24546),_=n.n(p);let g=(0,h.Pi)(()=>{let{paymentWidgetModal:e,advert:t}=(0,s.oR4)(),{state:n,toggleTrue:i}=(0,v.O)(!1),a=(0,s.SB9)();(0,r.useEffect)(()=>()=>{e.reset()},[e]);let l=(0,r.useCallback)(()=>{e.setStatus(o.SUCCESS),a.track({label:"WCvtCKnr84oYEPnRuvUo"})},[e,a]),d=(0,r.useCallback)(()=>{e.modal.close(),e.isSuccess&&window.location.reload(),e.reset()},[e]),m=(0,r.useCallback)(()=>{e.setStatus(o.ERROR)},[e]);return(0,u.jsx)(b.u,{open:e.modal.isOpened,size:"fitContent",placement:"center",showHeader:!1,withAnimation:!1,className:(0,c.W)(_().root,{[_().root_loaded]:n,[_().root_level_up]:t.isAdvertShown}),contentClassName:_().content,overlayColor:"full",children:(0,u.jsx)(f,{className:_().widget,target:e.target,serviceSessionId:e.serviceSessionId,tariffOfferName:e.tariffOfferName,onLoad:i,onSuccess:l,onError:m,onClose:d})})})},87398:function(e,t,n){"use strict";n.d(t,{CS:function(){return x},xU:function(){return c}});var i=n(99678),o=n(91207),r=n(36063),s=n(67228),a=n(31316),l=n(58997);let d=e=>{let{onClick:t,offerElement:n,isEnabled:i}=e,{element:r}=n||{};(0,o.useEffect)(()=>{if(r&&i)return r.addEventListener("click",t),()=>r.removeEventListener("click",t)},[r,t,i])};var m=n(51304);let u=e=>{var t;let{onShow:n,offerElement:i,isEnabled:r=!0}=e,s=(0,o.useRef)(null),{element:a,intersectionPropertyId:l}=i||{},d=(0,o.useMemo)(()=>a?(s.current=a,[s]):[],[a]),{isIntersecting:u}=null!==(t=(0,m.S1)(d,{preflightCheck:!1},!a||!r)[null!=l?l:""])&&void 0!==t?t:{};(0,o.useEffect)(()=>{u&&n()},[u,n])},c=e=>{let{storeName:t,offerElement:n,isEnabled:m=!0}=e,c=(0,i.useRouter)(),{mainText:h,additionText:v,isShimmerVisible:b,isShimmerActive:P,target:f,tariffOffer:p,serviceSessionId:_,offerPosition:g,offersBatchId:x,offersPositionId:S}=(0,s.F)(t,m),{open:y,isOpened:C}=(0,a.tP)({target:f,serviceSessionId:_,tariffOfferName:null==p?void 0:p.name,isEnabled:m}),{offersShown:N,offersClicked:T}=(0,l.E_I)(m),k=(0,o.useCallback)(()=>{m&&N({serviceSessionId:_,offersBatchId:x,offersPositionId:S,position:g})},[N,_,x,S,g,m]),M=(0,o.useCallback)(()=>{m&&T({serviceSessionId:_,offersBatchId:x,offersPositionId:S})},[T,_,x,S,m]);u({offerElement:n,isEnabled:m,onShow:k}),d({offerElement:n,isEnabled:m,onClick:M});let j=(0,l.uK4)(),w=(0,o.useCallback)(()=>{let e=j.get(l.xit),t=j.get(l.ArX);e.authorizationUrl&&(t.set(l.BUb.Offer,{target:f,serviceSessionId:_,tariffOfferName:null==p?void 0:p.name}),c.push(e.authorizationUrl))},[j,c,f,_,p]);return{mainText:h,additionText:v,isShimmerVisible:b,isShimmerActive:P,trialPlanPeriod:(0,o.useMemo)(()=>{var e,t,n,i;if((null==p?void 0:null===(t=p.plans)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.typename)===r.f.TrialPlan)return null==p?void 0:null===(i=p.plans)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:n.period},[p]),openPaymentWidgetModal:y,offersShown:k,offersClicked:M,saveOfferAndAuthorize:w,isPaymentWidgetModalOpened:C}};var h=n(65301),v=n(96233),b=n(44729),P=n(78372),f=n(14386),p=n(81437),_=n(82607);let g=e=>{let{className:t,mainTextClassName:n,additionTextClassName:i,onClick:r,isShimmerActive:s,isShimmerVisible:a,mainText:l,additionText:d,forwardRef:m,...u}=e,c=(0,o.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),null==r||r()},[r]);return a?(0,h.jsx)(_.Shimmer,{className:t,isActive:s,radius:"xxxl"}):(0,h.jsxs)(P.z,{ref:m,className:t,isBlock:!0,color:"plus",variant:"default",size:"l",radius:"xxxl",onClick:c,...u,children:[(0,h.jsx)(p.Caption,{className:n,variant:"div",size:"l",lineClamp:1,children:l}),(0,h.jsx)(p.Caption,{className:i,variant:"div",size:"xs",lineClamp:1,children:d})]})},x=(0,o.forwardRef)((e,t)=>(0,h.jsx)(g,{forwardRef:t,...e}));var S=n(17808),y=n.n(S);let C="buy-subscription-modal",N=(0,v.Pi)(()=>{let e=(0,o.useRef)(null),t=(0,i.useRouter)(),n=(0,l.uK4)().get(l.xit),{openPaymentWidgetModal:r,isShimmerActive:s,isShimmerVisible:a,mainText:d,additionText:m,saveOfferAndAuthorize:u}=c({storeName:"music",offerElement:{element:e.current,intersectionPropertyId:C}}),{modals:{buySubscriptionModal:v},user:_}=(0,l.oR4)(),g=(0,o.useCallback)(()=>{if(v.close(),!_.isAuthorized){u();return}r()},[v,r,u,_.isAuthorized]),S=(0,o.useCallback)(()=>{v.close(),n.authorizationUrl&&t.push(n.authorizationUrl)},[n.authorizationUrl,v,t]);return(0,h.jsxs)(f.u,{className:y().root,headerClassName:y().header,contentClassName:y().content,size:"fitContent",placement:"default",open:v.isOpened,onOpenChange:v.onOpenChange,onClose:v.close,lockScroll:!0,children:[(0,h.jsx)(p.Caption,{className:y().heading,variant:"div",weight:"bold",children:(0,h.jsx)(b.Z,{id:"buy-subscription.listen-without-restrictions",values:{nbsp:"\xa0"}})}),(0,h.jsxs)("div",{className:y().buttons,children:[(0,h.jsx)(x,{ref:e,"data-intersection-property-id":C,mainText:d,additionText:m,isShimmerActive:s,isShimmerVisible:a,onClick:g,className:y().button,mainTextClassName:y().buttonMainText,additionTextClassName:y().buttonAdditionText}),(0,h.jsx)(P.z,{onClick:S,className:y().button,isBlock:!0,color:"secondary",variant:"default",size:"l",radius:"xxxl",children:(0,h.jsx)(p.Caption,{className:y().buttonMainText,variant:"span",weight:"bold",children:(0,h.jsx)(b.Z,{id:"buy-subscription.already-in-plus",values:{nbsp:"\xa0"}})})})]})]})});var T=n(32907),k=n(82036),M=n(29778),j=n(29188),w=n.n(j);let D="buy-subscription-button",O=(0,v.Pi)(()=>{let e=(0,o.useRef)(null),{showBuySubscriptionModal:t}=(0,l.vLf)(),{mainText:n,isShimmerVisible:i,isShimmerActive:r}=c({storeName:"music",offerElement:{element:e.current,intersectionPropertyId:D}}),s=(0,T.V)(()=>i?(0,h.jsx)(M.AH,{className:w().titleShimmerContainer,isActive:r,textClassName:w().titleShimmer}):(0,h.jsx)(p.Caption,{className:w().title,variant:"span",size:"m",weight:"bold",children:n}));return(0,h.jsxs)("div",{ref:e,className:w().root,"data-intersection-property-id":D,children:[(0,h.jsxs)("div",{className:w().info,children:[(0,h.jsxs)("div",{className:w().titleContainer,children:[(0,h.jsx)(k.Icon,{className:w().icon,"aria-hidden":!0,variant:"plusColor",size:"xxxs"}),s]}),(0,h.jsx)(p.Caption,{className:w().subtitle,variant:"span",size:"xs",weight:"normal",children:(0,h.jsx)(b.Z,{id:"buy-subscription.music-and-films-and-other"})})]}),(0,h.jsx)(P.z,{color:"plus",variant:"default",size:"m",radius:"xxxl",onClick:t,children:(0,h.jsx)(p.Caption,{className:w().buttonText,variant:"span",size:"m",weight:"normal",children:(0,h.jsx)(b.Z,{id:"buy-subscription.activate"})})})]})});(0,v.Pi)(e=>{let{children:t}=e,{paymentWidgetModal:n}=(0,l.oR4)(),{shouldShowBuySubscriptionModal:i,showBuySubscriptionModal:r,hideBuySubscriptionModal:s}=(0,l.vLf)();return((0,o.useEffect)(()=>{if(i){if(n.modal.isOpened){s();return}r()}},[s,n.modal.isOpened,i,r]),i)?(0,h.jsxs)(h.Fragment,{children:[t,(0,h.jsx)(O,{}),(0,h.jsx)(N,{})]}):t})},88648:function(e,t,n){"use strict";n.d(t,{MyMusicDownloadedTracksPage:function(){return I}});var i=n(65301),o=n(9695),r=n(96233),s=n(91207),a=n(37184),l=n(55975),d=n(19489),m=n(14178),u=n(33387),c=n(36643),h=n(21016),v=n(3154),b=n(58997),P=n(29778),f=n(56910),p=n.n(f),_=n(44729),g=n(82036),x=n(81437),S=n(70930),y=n.n(S);let C=(0,r.Pi)(()=>{var e;let{myMusic:{downloadedTracks:t}}=(0,b.oR4)(),n=(0,i.jsx)(x.Caption,{variant:"span",size:"s",weight:"medium","aria-hidden":!0,children:"â€¢"}),o=[];(null===(e=t.tracks)||void 0===e?void 0:e.length)&&o.push((0,i.jsx)(x.Caption,{variant:"span",size:"s",weight:"medium",lineClamp:1,children:(0,i.jsx)(_.Z,{id:"entity-names.tracks-count",values:{value:t.tracks.length}})}));let r=Math.floor(t.tracksDurationInMinutes/60),a=Math.floor(t.tracksDurationInMinutes%60);return(r||a)&&(o.push(n),o.push((0,i.jsx)(x.Caption,{variant:"span",size:"s",weight:"medium",children:(0,i.jsx)(_.Z,{id:"time.hours-minutes",values:{hours:r,minutes:a}})}))),(0,i.jsx)("div",{className:y().root,children:o.map((e,t)=>(0,s.cloneElement)(e,{key:t}))})});var N=n(67152),T=n.n(N);let k=(0,r.Pi)(()=>{let{isScrolling:e}=(0,s.useContext)(P.pI),t=(0,b.k67)(),{myMusic:{downloadedTracks:n},settings:{isMobile:o},slam:r}=(0,b.oR4)(),{from:a}=(0,b.MhG)({pageId:b.Rhz.OWN_TRACKS,blockId:b.aUg.TRACK_LIST}),{isPlaying:l,togglePlay:m}=(0,b.qmq)({playContextParams:{contextData:{type:d.A.Various,meta:{id:b.Rhz.DOWNLOADS_TRACKS},from:a},entitiesData:n.entitiesData,loadContextMeta:!1}});return(0,i.jsx)("header",{className:T().root,"aria-hidden":e,children:(0,i.jsxs)("div",{className:T().container,children:[!r.isOfflineModeEnabled&&t.canBack&&(0,i.jsx)(P.nP,{withForwardControl:!1,withBackwardControl:t.canBack,buttonSize:"xxs"}),(0,i.jsxs)("div",{className:T().titleContainer,children:[(0,i.jsx)(x.Heading,{variant:"h1",weight:"bold",size:"xs",lineClamp:1,className:T().title,children:(0,i.jsx)(_.Z,{id:"offline.downloaded-tracks"})}),(0,i.jsx)(C,{})]}),!n.isEmpty&&(0,i.jsx)(P.JM,{withRipple:!0,buttonVariant:"default",radius:"xxxl",size:"s",color:"primary",iconSize:"xxs",isPlaying:l,onClick:m,className:T().playButton,ariaHidden:e,tabIndex:e?-1:0,children:!o&&(0,i.jsx)(_.Z,{id:"player-actions.listen"})})]})})});var M=n(59976),j=n.n(M);let w=(0,r.Pi)(()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k,{}),(0,i.jsxs)("div",{className:j().root,children:[(0,i.jsx)(g.Icon,{className:j().icon,size:"l",variant:"download"}),(0,i.jsx)(x.Heading,{className:j().title,variant:"div",size:"xs",children:(0,i.jsx)(_.Z,{id:"offline.downloaded-empty"})}),(0,i.jsx)(x.Caption,{className:j().text,variant:"span",type:"controls",size:"l",weight:"normal",children:(0,i.jsx)(_.Z,{id:"offline.download-for-offline"})})]})]})),D=(0,r.Pi)(()=>{let{isScrolling:e}=(0,s.useContext)(P.pI),t=(0,b.k67)(),{myMusic:{downloadedTracks:n},settings:{isMobile:r},slam:a}=(0,b.oR4)(),{from:l}=(0,b.MhG)({pageId:b.Rhz.OWN_TRACKS,blockId:b.aUg.TRACK_LIST}),{isPlaying:m,togglePlay:u}=(0,b.qmq)({playContextParams:{contextData:{type:d.A.Various,meta:{id:b.Rhz.DOWNLOADS_TRACKS},from:l},entitiesData:n.entitiesData,loadContextMeta:!1}});return(0,i.jsx)(P.h4,{variant:"composite","aria-hidden":!e,stickyChild:(0,i.jsxs)("div",{className:T().container,children:[!a.isOfflineModeEnabled&&t.canBack&&(0,i.jsx)(P.nP,{withForwardControl:!1,withBackwardControl:t.canBack,buttonSize:"xxs"}),(0,i.jsx)(x.Heading,{variant:"h1",weight:"bold",size:"xs",lineClamp:1,className:T().stickyTitle,children:(0,i.jsx)(_.Z,{id:"offline.downloaded-tracks"})}),!n.isEmpty&&(0,i.jsx)(P.JM,{withRipple:!0,buttonVariant:"default",radius:"xxxl",size:"s",color:"primary",iconSize:"xxs",isPlaying:m,onClick:u,className:(0,o.W)(T().playButton,{[T().stickyPlayButton]:!r}),ariaHidden:!e,tabIndex:e?0:-1,children:!r&&(0,i.jsx)(_.Z,{id:"player-actions.listen"})})]}),stickyClassName:(0,o.W)(T().stickyHeader,T().important),staticClassName:(0,o.W)(T().staticHeader,T().important)})}),O=[m.aT.IDLE,m.aT.DOWNLOADED],I=(0,r.Pi)(()=>{var e;let{contentScrollRef:t,setContentScrollRef:n}=(0,b.$Y6)(),{formatMessage:r}=(0,a.Z)(),f=(0,b.k67)(),{myMusic:{downloadedTracks:_}}=(0,b.oR4)(),{from:g}=(0,b.MhG)({pageId:b.Rhz.OWN_TRACKS,blockId:b.aUg.TRACK_LIST}),x=(0,b.h1d)(),S=(0,b.iXn)();f.replaceState({href:"/mymusic/downloads/tracks"});let y=(0,u.W)(()=>{x&&_.getData(x)}),C=(0,u.W)(e=>{let{state:t}=e;O.includes(t.loadingState)&&y()});(0,s.useEffect)(()=>{_.isNeededToLoad&&y()},[_.isNeededToLoad,y]),(0,s.useEffect)(()=>(null==x||x.events.on(m.tY.STATE_CHANGED,y),null==x||x.events.on(m.tY.TRACK_CHANGED,C),()=>{null==x||x.events.off(m.tY.STATE_CHANGED,y),null==x||x.events.off(m.tY.TRACK_CHANGED,C),_.reset()}),[_,y,C,x]),(0,b.NOh)(_.loadingState===b.Gui.RESOLVE);let N=(0,s.useMemo)(()=>({Header:()=>(0,i.jsx)(k,{}),Footer:()=>(0,i.jsx)(P.$_,{className:p().footer})}),[]);if(_.loadingState===b.Gui.REJECT)return(0,i.jsx)(c.D,{});if(_.isEmpty)return(0,i.jsx)(w,{});let T=(null===(e=_.items)||void 0===e?void 0:e.length)||10;return(0,i.jsx)(b.Lh6,{pageId:b.Rhz.DOWNLOADS_TRACKS,children:(0,i.jsx)(h.I7,{scrollElement:t,children:(0,i.jsxs)("div",{className:p().pageContainer,children:[(0,i.jsx)(D,{}),(0,i.jsx)(P.Wv,{context:{listAriaLabel:r({id:"offline.downloaded-track-list"})},className:(0,o.W)(p().root,p().important),listClassName:p().content,customComponents:N,totalCount:T,itemContentCallback:e=>{var t;let n=null===(t=_.items)||void 0===t?void 0:t[e];return n?(0,i.jsx)(v.O2,{track:n,playContextParams:S(e,{contextData:{type:d.A.Various,meta:{id:b.Rhz.DOWNLOADS_TRACKS},from:g},entitiesData:_.entitiesData,queueParams:{index:e},loadContextMeta:!1})}):(0,i.jsx)(P.DX,{isActive:!0,className:p().trackShimmer,variant:b.Lxt.PLAYLIST})},debounceDurationInMs:300,initialItemCount:T,handleRef:n,shouldTriggerRangeChangedOnTotalCountChange:!0,testId:l.Br.myMusic.MY_MUSIC_DOWNLOADED_TRACKS_PAGE})]})})})})},36643:function(e,t,n){"use strict";n.d(t,{D:function(){return i.SomethingWentWrong}});var i=n(87407)},87407:function(e,t,n){"use strict";n.d(t,{SomethingWentWrong:function(){return b}});var i=n(65301),o=n(9695),r=n(96233),s=n(91207),a=n(44729),l=n(78372),d=n(82036),m=n(81437),u=n(58997),c=n(29778),h=n(60637),v=n.n(h);let b=(0,r.Pi)(e=>{let{className:t,withBackwardControl:n=!0}=e,r=(0,s.useCallback)(()=>{window.location.href="/"},[]),{contentRef:h}=(0,u.$Y6)();return(0,i.jsxs)("div",{className:(0,o.W)(v().root,t),children:[n&&(0,i.jsx)(c.nP,{withBackwardFallback:"/",className:(0,o.W)(v().navigation,{[v().navigation_desktop]:!h}),withForwardControl:!1}),(0,i.jsxs)("div",{className:(0,o.W)(v().content,{[v().content_shrink]:!n}),children:[(0,i.jsx)(d.Icon,{className:v().icon,variant:"attention",size:"xxl"}),(0,i.jsx)(m.Heading,{className:(0,o.W)(v().title,v().important),variant:"h3",size:"xs",children:(0,i.jsx)(a.Z,{id:"error-messages.something-went-wrong"})}),(0,i.jsxs)(m.Caption,{className:(0,o.W)(v().text,v().important),variant:"span",type:"text",size:"l",weight:"normal",children:[!1,(0,i.jsx)(a.Z,{id:"page-error.try-to-restart-app"})]}),(0,i.jsx)(l.z,{onClick:r,className:v().button,role:"link",color:"secondary",size:"l",radius:"xxxl",children:(0,i.jsxs)(m.Caption,{type:"controls",variant:"span",size:"m",children:[!1,(0,i.jsx)(a.Z,{id:"page-error.restart-app-button"})]})})]})]})})},24546:function(e){e.exports={root:"PaymentWidgetModal_root__I6Hrp",root_loaded:"PaymentWidgetModal_root_loaded__Rzltj",root_level_up:"PaymentWidgetModal_root_level_up__pj52G",content:"PaymentWidgetModal_content__ifRry",widget:"PaymentWidgetModal_widget__cu_gr"}},29188:function(e){e.exports={root:"BuySubscriptionButton_root__BdquR",info:"BuySubscriptionButton_info__qBinu",subtitle:"BuySubscriptionButton_subtitle__Ni4VS",title:"BuySubscriptionButton_title__RG_OU",buttonText:"BuySubscriptionButton_buttonText__cmJMC",titleContainer:"BuySubscriptionButton_titleContainer__h7Lmt",titleShimmer:"BuySubscriptionButton_titleShimmer___hnah",titleShimmerContainer:"BuySubscriptionButton_titleShimmerContainer__Wv82r",icon:"BuySubscriptionButton_icon__0oNi_"}},17808:function(e){e.exports={root:"BuySubscriptionModal_root__5LvlX",content:"BuySubscriptionModal_content__v06Ju",heading:"BuySubscriptionModal_heading__07nBE",buttons:"BuySubscriptionModal_buttons__wSCRP",button:"BuySubscriptionModal_button__8m6Dx",buttonMainText:"BuySubscriptionModal_buttonMainText__pyjEc",buttonAdditionText:"BuySubscriptionModal_buttonAdditionText__rdKJn",header:"BuySubscriptionModal_header__ho5hr"}},70930:function(e){e.exports={root:"MyMusicDownloadedTracksInfo_root__yIYHx"}},56910:function(e){e.exports={root:"MyMusicDownloadedTracksPage_root__hZZwz",important:"MyMusicDownloadedTracksPage_important__QP_t0",pageContainer:"MyMusicDownloadedTracksPage_pageContainer__qu3hF",footer:"MyMusicDownloadedTracksPage_footer__KI5OP",content:"MyMusicDownloadedTracksPage_content__Iz1WY",trackShimmer:"MyMusicDownloadedTracksPage_trackShimmer__MZgW3"}},59976:function(e){e.exports={root:"MyMusicDownloadedTracksPageEmpty_root__LAXpY",icon:"MyMusicDownloadedTracksPageEmpty_icon__PDhk2",title:"MyMusicDownloadedTracksPageEmpty_title__g2w5R",text:"MyMusicDownloadedTracksPageEmpty_text__8RJFg"}},67152:function(e){e.exports={root:"MyMusicDownloadedTracksPageHeader_root__2vfuc",container:"MyMusicDownloadedTracksPageHeader_container__hQ_wt",title:"MyMusicDownloadedTracksPageHeader_title__Ncn5X",stickyTitle:"MyMusicDownloadedTracksPageHeader_stickyTitle__Efl0U",playButton:"MyMusicDownloadedTracksPageHeader_playButton__seWgC",stickyPlayButton:"MyMusicDownloadedTracksPageHeader_stickyPlayButton__JVicd",titleContainer:"MyMusicDownloadedTracksPageHeader_titleContainer__rLAkS",staticHeader:"MyMusicDownloadedTracksPageHeader_staticHeader__LSVC8",important:"MyMusicDownloadedTracksPageHeader_important__JIubq",stickyHeader:"MyMusicDownloadedTracksPageHeader_stickyHeader__MuQh4"}},60637:function(e){e.exports={root:"SomethingWentWrong_root__d77VJ",content:"SomethingWentWrong_content__8_YkJ",content_shrink:"SomethingWentWrong_content_shrink__GOR_7",navigation:"SomethingWentWrong_navigation__a8eMG",navigation_desktop:"SomethingWentWrong_navigation_desktop__WGGBX",icon:"SomethingWentWrong_icon__f15_y",title:"SomethingWentWrong_title__Kn89B",important:"SomethingWentWrong_important__namIb",text:"SomethingWentWrong_text__KEfGc",button:"SomethingWentWrong_button__dmh7t"}},36063:function(e,t,n){"use strict";var i,o;n.d(t,{f:function(){return i}}),(o=i||(i={})).IntroPlan="IntroPlan",o.IntroUntilPlan="IntroUntilPlan",o.TrialPlan="TrialPlan",o.TrialUntilPlan="TrialUntilPlan"}},function(e){e.O(0,[3537,6072,1884,9158,9582,9123,5734,7425,145,85,5453,7873,5493,7311,2845,9034,9778,1694,721,4709,3154,4474,6642,437,4763,1001,1783,3504,2291,1744],function(){return e(e.s=23399)}),_N_E=e.O()}]);